<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/6e70406a5faf27da0ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e70406a5faf27da0ab5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c3d6bf3bdebda9df7a43.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c3d6bf3bdebda9df7a43.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-c5e88ac7b5d12a6b06c4.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.93a4db703368d9b8f53e.js" as="script"/><link rel="preload" href="/_next/static/chunks/937d5c82571cfc37c3d32c251383e4b22c7358df.837da7d788abf8f22a17.js" as="script"/><link rel="preload" href="/_next/static/chunks/2ac77e8dc511a42e0379e501e381479886fc7b17.2cf25115c9bece230c23.js" as="script"/><link rel="preload" href="/_next/static/chunks/97dc9423d457d81845a9b58521070c6dd0a96b57.643d43b4e390b04a8aa8.js" as="script"/><link rel="preload" href="/_next/static/chunks/71247caf95475e3ea7f9a0f8a30beb258b23d005.312f906e76cb28e567a2.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-ed8be870de47e748a43a.js" as="script"/><link rel="preload" href="/_next/static/chunks/dedc4478a78d479bf8ffdcb3b380ad218e269703.600c6d112a95efe29e7c.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-f399e6ad48840948a826.js" as="script"/></head><body><div id="__next"><div><div class="layout_header__1OJ41"><div class="MuiGrid-root MuiGrid-container" style="text-align:center"><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-4"></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-4" style="display:flex;flex-direction:row"><img src="/images/profile-light.png" class="layout_headerImage__jSguI" alt="Disa Ada&#x27;s Blog"/></div><div class="MuiGrid-root MuiGrid-item MuiGrid-grid-xs-4"><b>ðŸŒž</b><span class="MuiSwitch-root"><span class="MuiButtonBase-root MuiIconButton-root jss2 MuiSwitch-switchBase MuiSwitch-colorSecondary" aria-disabled="false"><span class="MuiIconButton-label"><input type="checkbox" class="jss5 MuiSwitch-input"/><span class="MuiSwitch-thumb"></span></span></span><span class="MuiSwitch-track"></span></span><b>ðŸŒ™</b></div></div></div><div style="display:flex;background-image:url(&#x27;/images/background-light.png&#x27;)"><div class="MuiContainer-root MuiContainer-maxWidthSm" style="background-color:#FDF6F0"><div class="MuiBox-root jss14 layout_contentBox__1c-21"><section class="utils_headingMd__3de6G"><p><div><a href="/posts">ðŸ”™ Back/Kembali</a></div><article><h1 class="utils_headingXl__1XecN">Otentikasi User Dengan JWT Dalam ExpressJS</h1><div class="utils_lightText__12Ckm"><time dateTime="2020-09-19T22:38:00-07:00">September 20, 2020</time></div><div><p>&nbsp;Otentikasi dilakukan untuk pengecekan agar tidak sembarang orang yang bisa mengakses fitur/<i>request</i>, melainkan hanya untuk orang-orang yg sudah terdaftar/login saja. Kalau dulu dalam pengecekan ini saya mengetahuinya dengan menggunakan <i>session</i>, dengan alur ketika user login, data login disimpan di <i>session store</i>, lalu ketika user hendak mengakses suatu fitur/meminta <i>request</i>, server akan mengecek apakah datanya ada di dalam <i>session store</i> atau tidak. Kalau tidak, <i>request</i>-nya akan ditolak sehingga mengharusnya dia login kembali.</p><p>Nah, JWT (JSON Web Token) juga mirip-mirip alur logikanya, hanya data yang digunakan untuk pengecekannya tidak menggunakan <i>session</i>,<i> </i>melainkan dengan token. Kalau digambarkan alurnya seperti ini:</p><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-yDJ4LBtk0v8/X2a3-ttkRDI/AAAAAAAABfU/gnaZiCpFgOw4-8J1OpCaHJXn5OVA9X4IQCLcBGAsYHQ/s435/Screenshot%2Bfrom%2B2020-09-20%2B08-59-42.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="398" data-original-width="435" height="366" src="https://1.bp.blogspot.com/-yDJ4LBtk0v8/X2a3-ttkRDI/AAAAAAAABfU/gnaZiCpFgOw4-8J1OpCaHJXn5OVA9X4IQCLcBGAsYHQ/w400-h366/Screenshot%2Bfrom%2B2020-09-20%2B08-59-42.png" width="400" /></a></div><p>Disini saya menggunakan <a href="https://www.postman.com/">Postman</a> sebagai simulasi <i>client</i> agar saya bisa fokus ke bagian pemrograman servernya (step nomor 2, 3, 6, dan 7). Lalu diasumsikan sudah terkoneksi dengan <i>database </i>dan sudah ada beberapa data user (password dienkripsi dengan menggunakan <a href="https://www.npmjs.com/package/bcrypt">bcrypt</a>). Saya menggunakan ExpressJS, berikut tahapannya:</p><p>1. Membuat <i>callback </i>login/ signup, tidak lupa install package <a href="https://www.npmjs.com/package/jsonwebtoken">jsonwebtoken</a><br /><script src="https://gist.github.com/disaada/d42aeda7e4c52b8bb1d1e7b9997a7833.js"></script></p><p>2. Membuat <i>function </i>untuk otentikasi JWT</p><p>ketika <i>client </i>meminta <i>request, client </i>harus menyertakan tokennya untuk dicek, nanti token akan di kirim dalam bentuk objek :</p><p><i>authorization : Bearer {token yang berisi sekumpulan kode-kode}</i></p><p>kita hanya memerlukan tokennya saja, <i>bearer </i>tidak dibawa. Maka kodenya akan seperti ini :&nbsp;</p><p><script src="https://gist.github.com/disaada/e881e369729160f04632662a6cbc9fe3.js"></script></p><p>&nbsp;lalu <i>function </i>otentikasi JWT (kalau saya namanya <i><span class="pl-en">authenticateJWT</span></i>)<i> </i>bisa kita panggil di<i> </i>semua <i>callback</i> sebagai <i>middleware</i> yang tugasnya seperti satpam yang akan selalu minta <i>ID Card</i> kita (token) setiap kita mau memasuki ruangan-ruangan khusus yang hanya bisa dimasuki orang-orang tertentu</p><p><script src="https://gist.github.com/disaada/ad6382ce42b114f96304e9ba26354204.js"></script></p><p>kita coba simulasi menggunakan Postman, pastikan server sudah aktif. Simulasi diawali ketika user login :</p><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-6uYkiWklrnQ/X2bphLgXA-I/AAAAAAAABgM/0PTK3-118bsVcNmgEE_-dMD9lK1NmsdWACLcBGAsYHQ/s1034/Screenshot%2Bfrom%2B2020-09-20%2B08-34-43.jpg" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="675" data-original-width="1034" height="418" src="https://1.bp.blogspot.com/-6uYkiWklrnQ/X2bphLgXA-I/AAAAAAAABgM/0PTK3-118bsVcNmgEE_-dMD9lK1NmsdWACLcBGAsYHQ/w640-h418/Screenshot%2Bfrom%2B2020-09-20%2B08-34-43.jpg" width="640" /></a></div><p>lalu ketika user berhasil login, kemudian user ceritanya ingin mengakses menu Profile untuk melihat Profile pribadinya. Sebelum masuk ke modul Profile, server akan melakukan pengecekan terlebih dahulu. Karena ini simulasi, jadi token harus kita masukkan manual </p><p></p><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-1IBeaZ8c01g/X2bp_vrS_MI/AAAAAAAABgU/6lCmaPd2VEQo0LUIH0Mxhu7FmWoIuM6IgCLcBGAsYHQ/s1043/Screenshot%2Bfrom%2B2020-09-20%2B08-35-28.jpg" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="690" data-original-width="1043" height="424" src="https://1.bp.blogspot.com/-1IBeaZ8c01g/X2bp_vrS_MI/AAAAAAAABgU/6lCmaPd2VEQo0LUIH0Mxhu7FmWoIuM6IgCLcBGAsYHQ/w640-h424/Screenshot%2Bfrom%2B2020-09-20%2B08-35-28.jpg" width="640" /></a></div><br />&nbsp;<p></p><p>Demikian simulasi otentikasi dengan menggunakan JWT dalam ExpressJS. Semoga bermanfaat, apakah ada yang tidak dipahami? Jika ada, silahkan layangkan di kolom komentar ^^</p></div></article></p></section></div><div style="text-align:center"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true" style="cursor:pointer" title="Click for copy the email"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57V12c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57V12c0-5.52-4.48-10-10-10zm0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path></svg><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true" style="cursor:pointer"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path></svg><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true" style="cursor:pointer"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"></path></svg><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true" style="cursor:pointer"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"kind":"blogger#post","id":"6466348211579113359","blog":{"id":"1878161774557981040"},"published":"2020-09-19T22:38:00-07:00","updated":"2021-02-07T00:18:00-08:00","url":"http://disa-ada.blogspot.com/2020/09/otentikasi-user-dengan-jwt-dalam.html","selfLink":"https://www.googleapis.com/blogger/v3/blogs/1878161774557981040/posts/6466348211579113359","title":"Otentikasi User Dengan JWT Dalam ExpressJS","content":"\u003cp\u003e\u0026nbsp;Otentikasi dilakukan untuk pengecekan agar tidak sembarang orang yang bisa mengakses fitur/\u003ci\u003erequest\u003c/i\u003e, melainkan hanya untuk orang-orang yg sudah terdaftar/login saja. Kalau dulu dalam pengecekan ini saya mengetahuinya dengan menggunakan \u003ci\u003esession\u003c/i\u003e, dengan alur ketika user login, data login disimpan di \u003ci\u003esession store\u003c/i\u003e, lalu ketika user hendak mengakses suatu fitur/meminta \u003ci\u003erequest\u003c/i\u003e, server akan mengecek apakah datanya ada di dalam \u003ci\u003esession store\u003c/i\u003e atau tidak. Kalau tidak, \u003ci\u003erequest\u003c/i\u003e-nya akan ditolak sehingga mengharusnya dia login kembali.\u003c/p\u003e\u003cp\u003eNah, JWT (JSON Web Token) juga mirip-mirip alur logikanya, hanya data yang digunakan untuk pengecekannya tidak menggunakan \u003ci\u003esession\u003c/i\u003e,\u003ci\u003e \u003c/i\u003emelainkan dengan token. Kalau digambarkan alurnya seperti ini:\u003c/p\u003e\u003cdiv class=\"separator\" style=\"clear: both; text-align: center;\"\u003e\u003ca href=\"https://1.bp.blogspot.com/-yDJ4LBtk0v8/X2a3-ttkRDI/AAAAAAAABfU/gnaZiCpFgOw4-8J1OpCaHJXn5OVA9X4IQCLcBGAsYHQ/s435/Screenshot%2Bfrom%2B2020-09-20%2B08-59-42.png\" style=\"margin-left: 1em; margin-right: 1em;\"\u003e\u003cimg border=\"0\" data-original-height=\"398\" data-original-width=\"435\" height=\"366\" src=\"https://1.bp.blogspot.com/-yDJ4LBtk0v8/X2a3-ttkRDI/AAAAAAAABfU/gnaZiCpFgOw4-8J1OpCaHJXn5OVA9X4IQCLcBGAsYHQ/w400-h366/Screenshot%2Bfrom%2B2020-09-20%2B08-59-42.png\" width=\"400\" /\u003e\u003c/a\u003e\u003c/div\u003e\u003cp\u003eDisini saya menggunakan \u003ca href=\"https://www.postman.com/\"\u003ePostman\u003c/a\u003e sebagai simulasi \u003ci\u003eclient\u003c/i\u003e agar saya bisa fokus ke bagian pemrograman servernya (step nomor 2, 3, 6, dan 7). Lalu diasumsikan sudah terkoneksi dengan \u003ci\u003edatabase \u003c/i\u003edan sudah ada beberapa data user (password dienkripsi dengan menggunakan \u003ca href=\"https://www.npmjs.com/package/bcrypt\"\u003ebcrypt\u003c/a\u003e). Saya menggunakan ExpressJS, berikut tahapannya:\u003c/p\u003e\u003cp\u003e1. Membuat \u003ci\u003ecallback \u003c/i\u003elogin/ signup, tidak lupa install package \u003ca href=\"https://www.npmjs.com/package/jsonwebtoken\"\u003ejsonwebtoken\u003c/a\u003e\u003cbr /\u003e\u003cscript src=\"https://gist.github.com/disaada/d42aeda7e4c52b8bb1d1e7b9997a7833.js\"\u003e\u003c/script\u003e\u003c/p\u003e\u003cp\u003e2. Membuat \u003ci\u003efunction \u003c/i\u003euntuk otentikasi JWT\u003c/p\u003e\u003cp\u003eketika \u003ci\u003eclient \u003c/i\u003ememinta \u003ci\u003erequest, client \u003c/i\u003eharus menyertakan tokennya untuk dicek, nanti token akan di kirim dalam bentuk objek :\u003c/p\u003e\u003cp\u003e\u003ci\u003eauthorization : Bearer {token yang berisi sekumpulan kode-kode}\u003c/i\u003e\u003c/p\u003e\u003cp\u003ekita hanya memerlukan tokennya saja, \u003ci\u003ebearer \u003c/i\u003etidak dibawa. Maka kodenya akan seperti ini :\u0026nbsp;\u003c/p\u003e\u003cp\u003e\u003cscript src=\"https://gist.github.com/disaada/e881e369729160f04632662a6cbc9fe3.js\"\u003e\u003c/script\u003e\u003c/p\u003e\u003cp\u003e\u0026nbsp;lalu \u003ci\u003efunction \u003c/i\u003eotentikasi JWT (kalau saya namanya \u003ci\u003e\u003cspan class=\"pl-en\"\u003eauthenticateJWT\u003c/span\u003e\u003c/i\u003e)\u003ci\u003e \u003c/i\u003ebisa kita panggil di\u003ci\u003e \u003c/i\u003esemua \u003ci\u003ecallback\u003c/i\u003e sebagai \u003ci\u003emiddleware\u003c/i\u003e yang tugasnya seperti satpam yang akan selalu minta \u003ci\u003eID Card\u003c/i\u003e kita (token) setiap kita mau memasuki ruangan-ruangan khusus yang hanya bisa dimasuki orang-orang tertentu\u003c/p\u003e\u003cp\u003e\u003cscript src=\"https://gist.github.com/disaada/ad6382ce42b114f96304e9ba26354204.js\"\u003e\u003c/script\u003e\u003c/p\u003e\u003cp\u003ekita coba simulasi menggunakan Postman, pastikan server sudah aktif. Simulasi diawali ketika user login :\u003c/p\u003e\u003cdiv class=\"separator\" style=\"clear: both; text-align: center;\"\u003e\u003ca href=\"https://1.bp.blogspot.com/-6uYkiWklrnQ/X2bphLgXA-I/AAAAAAAABgM/0PTK3-118bsVcNmgEE_-dMD9lK1NmsdWACLcBGAsYHQ/s1034/Screenshot%2Bfrom%2B2020-09-20%2B08-34-43.jpg\" style=\"margin-left: 1em; margin-right: 1em;\"\u003e\u003cimg border=\"0\" data-original-height=\"675\" data-original-width=\"1034\" height=\"418\" src=\"https://1.bp.blogspot.com/-6uYkiWklrnQ/X2bphLgXA-I/AAAAAAAABgM/0PTK3-118bsVcNmgEE_-dMD9lK1NmsdWACLcBGAsYHQ/w640-h418/Screenshot%2Bfrom%2B2020-09-20%2B08-34-43.jpg\" width=\"640\" /\u003e\u003c/a\u003e\u003c/div\u003e\u003cp\u003elalu ketika user berhasil login, kemudian user ceritanya ingin mengakses menu Profile untuk melihat Profile pribadinya. Sebelum masuk ke modul Profile, server akan melakukan pengecekan terlebih dahulu. Karena ini simulasi, jadi token harus kita masukkan manual \u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"separator\" style=\"clear: both; text-align: center;\"\u003e\u003ca href=\"https://1.bp.blogspot.com/-1IBeaZ8c01g/X2bp_vrS_MI/AAAAAAAABgU/6lCmaPd2VEQo0LUIH0Mxhu7FmWoIuM6IgCLcBGAsYHQ/s1043/Screenshot%2Bfrom%2B2020-09-20%2B08-35-28.jpg\" style=\"margin-left: 1em; margin-right: 1em;\"\u003e\u003cimg border=\"0\" data-original-height=\"690\" data-original-width=\"1043\" height=\"424\" src=\"https://1.bp.blogspot.com/-1IBeaZ8c01g/X2bp_vrS_MI/AAAAAAAABgU/6lCmaPd2VEQo0LUIH0Mxhu7FmWoIuM6IgCLcBGAsYHQ/w640-h424/Screenshot%2Bfrom%2B2020-09-20%2B08-35-28.jpg\" width=\"640\" /\u003e\u003c/a\u003e\u003c/div\u003e\u003cbr /\u003e\u0026nbsp;\u003cp\u003e\u003c/p\u003e\u003cp\u003eDemikian simulasi otentikasi dengan menggunakan JWT dalam ExpressJS. Semoga bermanfaat, apakah ada yang tidak dipahami? Jika ada, silahkan layangkan di kolom komentar ^^\u003c/p\u003e","author":{"id":"02079035408372565918","displayName":"Disa Ada","url":"https://www.blogger.com/profile/02079035408372565918","image":{"url":"//www.blogger.com/img/blogger_logo_round_35.png"}},"replies":{"totalItems":"0","selfLink":"https://www.googleapis.com/blogger/v3/blogs/1878161774557981040/posts/6466348211579113359/comments"},"labels":["Web Developing"],"etag":"\"dGltZXN0YW1wOiAxNjEyNjg1ODgwMTgxCm9mZnNldDogLTI4ODAwMDAwCg\""}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"6466348211579113359"},"buildId":"kndvKbxsEB0IYia6wyzIc","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-e5012cf49fbb0a2642db.js"></script><script src="/_next/static/chunks/main-c5e88ac7b5d12a6b06c4.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.93a4db703368d9b8f53e.js" async=""></script><script src="/_next/static/chunks/937d5c82571cfc37c3d32c251383e4b22c7358df.837da7d788abf8f22a17.js" async=""></script><script src="/_next/static/chunks/2ac77e8dc511a42e0379e501e381479886fc7b17.2cf25115c9bece230c23.js" async=""></script><script src="/_next/static/chunks/97dc9423d457d81845a9b58521070c6dd0a96b57.643d43b4e390b04a8aa8.js" async=""></script><script src="/_next/static/chunks/71247caf95475e3ea7f9a0f8a30beb258b23d005.312f906e76cb28e567a2.js" async=""></script><script src="/_next/static/chunks/pages/_app-ed8be870de47e748a43a.js" async=""></script><script src="/_next/static/chunks/dedc4478a78d479bf8ffdcb3b380ad218e269703.600c6d112a95efe29e7c.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-f399e6ad48840948a826.js" async=""></script><script src="/_next/static/kndvKbxsEB0IYia6wyzIc/_buildManifest.js" async=""></script><script src="/_next/static/kndvKbxsEB0IYia6wyzIc/_ssgManifest.js" async=""></script></body></html>